<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Testing2 : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Testing2</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/elmertan/testing2">View on GitHub</a>

          <h1 id="project_title">Testing2</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/elmertan/testing2/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/elmertan/testing2/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a id="goal-and-background" class="anchor" href="#goal-and-background" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Goal and Background</h2>

<p>The season of campaigns, debates, and primaries and caucuses leading up to the 2016 presidential election has undoubtedly been one of most eventful, widely discussed, and exciting in living memory: the members of each party consider candidates largely censured by the entrenched party establishments whose opinions and policy proposals range from what might be considered ultra-conservative to what might be considered ultra-liberal.</p>

<p>No little interest in the on-going events is generated by those who would forecast the outcome of the primaries and, ultimately, the election. After the widely acknowledged success of Nate Silver in his predictions of the 2012 election, the possibility of another sweeping “victory” on that field through the use of data-driven methods has become a most tantalizing prospect.
Yet other sources of the enthusiasm surrounding the primary are the incredibly democratic forums that are the social media. Across Facebook, Twitter, and Tumblr, countless individuals weigh in on the election, providing opinions, statements of support, and even their own predictions as to its outcome.</p>

<p>It seemed to us that this second series of sources remained largely untapped by the first: whereas predictions from many polls and aggregators are circulated through social media, we find that not many attempt to incorporate data from, for example, Facebook statuses and Twitter Tweets despite the immense population participating in the latter that is likely to be non-intersecting with the population participating in the former.</p>

<p>As such, we chose to investigate this latter outlet of information. In this project, we tried primarily to see whether inclusion of data gathered from Twitter could augment the predictive power of models aiming to predict the county-by-county results of primary elections and secondarily to build such a model based on campaign finances (contributions and expenditures). Specifically, we sought to build a model from the results of several April primaries and caucuses and then to predict the results of another.</p>

<h2>
<a id="data" class="anchor" href="#data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Data</h2>

<p>One of the great difficulties in this project was procuring suitable, representative, and complete pertinent data. In particular, we needed to compile a large body of Tweets as well as to collect information concerning the campaign finances of the five candidates.
The second of these tasks was straightforward, as such is contained in well documented public records: the Federal Election Commission stores such information in easy-to-parse .csv files.</p>

<p>Collecting Tweets, however, proved to be extremely difficult and limiting with respect to the potential scope of our project. We had two avenues to Tweet access: the Search Representational State Transfer Application Programming Interface and the Streaming APIs. The former provides programmatic access to read public Twitter data from the past seven days while the latter provides access to read Twitter’s global stream of Tweet data. Thus was the first difficulty: neither mode of access provided the ability to retrieve historical data, which meant that the data we could use to train our model was constrained to that associated with primaries and caucuses taking place in April—which meant that we would need to train on the data provided by the New York primaries and test on that provided by the Connecticut primaries.</p>

<p>There were further limitations inherent in the APIs however. It was never the case that we received all of the Tweets across Twitter, or even all of the publically available Tweets – we merely saw what Twitter deigned to provide us with, which was likely to be less than a single percent of the global traffic. We were also ultimately unable to use the Streaming API – the manner in which it narrowed down Tweets according to search parameters (i.e., barely at all) caused us to receive many gigabytes of data that we could not process. The streaming nature of the API also prevented our use of it, as we had no method of setting up a constantly running endpoint to collect such data.</p>

<p>What remained to us was the collection and sifting through of Twitter Search API data. We collected Tweets containing any of several hashtags, about four per candidate: <code>feelthebern</code>, <code>sanders</code>, <code>berniesanders</code>, <code>bernie2016</code>, <code>Clinton</code>, <code>hillaryclinton</code>, <code>imwithher</code>, <code>hillary2016</code>, <code>tedcruz</code>, <code>choosecruz</code>, <code>cruzcrew</code>, <code>unitewithcruz</code>, <code>cruz2016</code>, <code>trump2016</code>, <code>donaldtrump</code>, <code>#trump</code>, <code>donaldtrump2016</code>, <code>kasichcan</code>, <code>johnkasich</code>, <code>kasich2016</code>, <code>kasich4us</code>. These were additionally associated with belonging to one specific county (one of the sixty-two in New York for training, or one of the eight in Connecticut for testing). Overall, we collected around 60000 Tweets from the week leading up to the New York primaries and around 24000 Tweets from the week leading up to the Connecticut primaries. Our Tweet collection from these states may be summarized by the maps below, where a single blue dot indicates a geocoded Tweet.</p>

<p><img src="https://raw.githubusercontent.com/sbalanovich/APM115Proj2/gh-pages/images/NYTweetsMap.png" alt="New York Map"></p>

<p><img src="https://raw.githubusercontent.com/sbalanovich/APM115Proj2/gh-pages/images/CTTweetsMap.png" alt="Connecticut Map"></p>

<p>We note that the Tweets are exceedingly sparse except in major cities like New York City or New Haven.</p>

<h2>
<a id="approachmodel" class="anchor" href="#approachmodel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Approach/Model</h2>

<p>Armed with these data, we started by exploring and considering the best way to model them. We began by identifying the most important features of our dataset and examining their interplay.
With respect to campaign finances, we created features based on contributions and expenditures within a county over the weeks leading up to a primary.</p>

<p>On the Twitter front, we isolated Tweets that were not Retweets and specifically geolocated to the counties in question from the rest: the posters of these Tweets, we thought, have so indicated a higher degree of participation in the discussion and persuasion concerning the election than those who merely pressed a Retweet button. For each of the two sets (not-Retweets and all Tweets) we identified features such as the average number of followers of a user who posted a Tweet pertaining to a certain candidate, the average number of Retweets of Tweets pertaining to a certain candidate, and even the proportion of Tweets pertaining to a certain candidate with a specific sentiment as evaluated by the Sentiment140 API.</p>

<p>All told, we had assembled some 38 features for the Democratic race and 64 features for the Republican race (the latter is greater because there was an additional Republican candidate at the time). However, reconsidering our stated goal, we realized that we desired a model that would be able to tell us the relative importance of each of our features, both because we desired to discover whether the Tweet-related features were important to better modeling votes and because we had so many features relative to the number of data points.</p>

<p>As such, we decided upon the use of an ensemble learning method called random forests. At training time, we construct a “forest” of decision trees to fit the training data. At prediction time, the mean of the decision trees’ predictions is output. This method was chosen because it would allow us to examine the importance of our features (as a result of the use of decision trees) but also correct for the inherent nature of decision trees to overfit.</p>

<h2>
<a id="results" class="anchor" href="#results" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Results</h2>

<p>On the whole, our results can only be described as inconclusive; we do not have enough data points to be sure of the answer to either of our questions: We do not know whether Twitter augments our base model—it seems to in fact worsen it, but this is likely due to the large number of additional features the Twitter data adds; and our model generates extremely weak predictions.
Specifically, the following is a graphic that depicts the predictions on our testing data (Democrat-only, simply because the Republican results are similar and we choose to omit them for the sake of parsimony) by the model that incorporates all financial and Twitter-related features:</p>

<p><img src="https://raw.githubusercontent.com/sbalanovich/APM115Proj2/gh-pages/images/ConnecticutDemPredictions.png" alt="Connecticut Democratic predictions"></p>

<p>These error bars were generated by predicting the vote proportion by use of each of the trees that constitutes the random forest and then taking the 2.5% and 97.5% quantiles. It is evident that our predictions are far off and extremely uncertain. (NB: These predictions are different from the ones listed in our presentation because there was a bug in our code that caused our predictions to be far closer than they should have been to the actual values.)
The following two tables depict a comparison of the different models that we used. The first is a table of Mean Absolute Error of the predictions over each dataset for each model (NB: the term R^2 used in the presentation referred to the difference between unity and the ratio of the residual sum of squares and the total sum of squares, which can result in a negative number if the former is much greater than the latter):</p>

<table>
<thead>
<tr>
<th align="left">Model</th>
<th align="center">Training</th>
<th align="center">Testing</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Contributions Over Time</td>
<td align="center">0.022996</td>
<td align="center">0.068252</td>
</tr>
<tr>
<td align="left">Contributions</td>
<td align="center">0.021971</td>
<td align="center">0.034600</td>
</tr>
<tr>
<td align="left">Expenditures Over Time</td>
<td align="center">0.047842</td>
<td align="center">0.031352</td>
</tr>
<tr>
<td align="left">Expenditures</td>
<td align="center">0.047734</td>
<td align="center">0.038127</td>
</tr>
<tr>
<td align="left">C/E Over Time</td>
<td align="center">0.022386</td>
<td align="center">0.068348</td>
</tr>
<tr>
<td align="left">C/E</td>
<td align="center">0.025281</td>
<td align="center">0.040461</td>
</tr>
<tr>
<td align="left">Twitter Only</td>
<td align="center">0.027176</td>
<td align="center">0.042261</td>
</tr>
<tr>
<td align="left">C/E and Twitter</td>
<td align="center">0.023269</td>
<td align="center">0.066317</td>
</tr>
</tbody>
</table>

<p>And this table indicates the success of our model as it pertains to predicting the correct winner in each county: it lists the number of counties for each model whose winner was successfully predicted in the Democratic race.</p>

<table>
<thead>
<tr>
<th align="left">Model</th>
<th align="center">Training (out of 62)</th>
<th align="center">Testing (out of 8)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Contributions Over Time</td>
<td align="center">58</td>
<td align="center">4</td>
</tr>
<tr>
<td align="left">Contributions</td>
<td align="center">58</td>
<td align="center">8</td>
</tr>
<tr>
<td align="left">Expenditures Over Time</td>
<td align="center">53</td>
<td align="center">8</td>
</tr>
<tr>
<td align="left">Expenditures</td>
<td align="center">53</td>
<td align="center">8</td>
</tr>
<tr>
<td align="left">C/E Over Time</td>
<td align="center">60</td>
<td align="center">4</td>
</tr>
<tr>
<td align="left">C/E</td>
<td align="center">57</td>
<td align="center">7</td>
</tr>
<tr>
<td align="left">Twitter Only</td>
<td align="center">58</td>
<td align="center">6</td>
</tr>
<tr>
<td align="left">C/E and Twitter</td>
<td align="center">59</td>
<td align="center">5</td>
</tr>
</tbody>
</table>

<h2>
<a id="future-directions" class="anchor" href="#future-directions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Future Directions</h2>

<p>This project leaves a great deal for future investigation, as the modeling and analyses conducted herein were very much first steps rather than a comprehensive approach: with more suitable infrastructure, we could better collect and filter Tweets to better gather data; with better timing and more time, we could have been modeling on larger training and testing sets.</p>

<h2>
<a id="what-we-learned" class="anchor" href="#what-we-learned" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What We Learned</h2>

<p>I don’t think we need this section.</p>

<h2>
<a id="references" class="anchor" href="#references" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>References:</h2>

<p>?</p>

<h2>
<a id="attribution-of-individual-effort" class="anchor" href="#attribution-of-individual-effort" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Attribution of Individual Effort:</h2>

<p>Serguei conducted the campaign finances data gathering and feature extraction. Elmer conducted the Twitter data gathering and feature extraction. Each contributed to the modeling. Serguei created the majority of the presentation. Elmer created the visuals wrote the majority of the writeup.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Testing2 maintained by <a href="https://github.com/elmertan">elmertan</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
